{"version":3,"file":"_page.svelte-Dz5quyLx.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(sidebar)/settings/tasks/_page.svelte.js"],"sourcesContent":["import { s as subscribe } from \"../../../../../chunks/utils2.js\";\nimport { c as create_ssr_component, v as validate_component, e as escape, h as each, b as add_attribute } from \"../../../../../chunks/ssr.js\";\nimport { intlFormatDistance } from \"date-fns\";\nimport { a as i18n } from \"../../../../../chunks/i18n.js\";\nimport { I as Icon } from \"../../../../../chunks/Icon.js\";\nimport cronstrue from \"cronstrue\";\nimport \"devalue\";\nimport \"../../../../../chunks/client.js\";\nimport \"../../../../../chunks/ProgressBar.svelte_svelte_type_style_lang.js\";\nimport { P as ProgressRadial } from \"../../../../../chunks/ProgressRadial.js\";\nconst Play = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  const iconNode = [[\"polygon\", { \"points\": \"5 3 19 12 5 21 5 3\" }]];\n  return `${validate_component(Icon, \"Icon\").$$render($$result, Object.assign({}, { name: \"play\" }, $$props, { iconNode }), {}, {\n    default: () => {\n      return `${slots.default ? slots.default({}) : ``}`;\n    }\n  })}`;\n});\nconst Play$1 = Play;\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $i18n, $$unsubscribe_i18n;\n  $$unsubscribe_i18n = subscribe(i18n, (value) => $i18n = value);\n  let { data } = $$props;\n  setInterval(\n    () => {\n      data.tasks = data.tasks;\n    },\n    1e3\n  );\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  $$unsubscribe_i18n();\n  return `<h2 class=\"h2 mb-4\">${escape($i18n.t(\"settings.tasks.scheduled-tasks\"))}</h2> <div class=\"table-container\"><table class=\"table table-hover [&_td]:!align-middle\"><thead><tr><th>${escape($i18n.t(\"settings.tasks.name\"))}</th> <th>${escape($i18n.t(\"settings.tasks.interval\"))}</th> <th>${escape($i18n.t(\"settings.tasks.last-execution\"))}</th> <th>${escape($i18n.t(\"settings.tasks.last-duration\"))}</th> <th>${escape($i18n.t(\"settings.tasks.next-execution\"))}</th> <th></th></tr></thead> <tbody>${each(data.tasks, (task) => {\n    return `<tr><td>${escape($i18n.t(\"tasks.\" + task.id))}</td> <td class=\"capitalize\">${escape(cronstrue.toString(task.schedule, { locale: $i18n.language }))}</td> <td class=\"capitalize\">${escape(task.stats.lastExecution ? intlFormatDistance(task.stats.lastExecution, /* @__PURE__ */ new Date(), { locale: $i18n.language }) : \"-\")}</td> <td> ${escape(task.stats.lastDuration ? `${task.stats.lastDuration} ${$i18n.t(\"settings.tasks.milliseconds\")}` : \"-\")}</td> <td class=\"capitalize\">${escape(task.stats.nextExecution ? intlFormatDistance(task.stats.nextExecution, /* @__PURE__ */ new Date(), { locale: $i18n.language }) : \"-\")}</td> <td class=\"flex items-center justify-end gap-2\"><form method=\"post\"><input type=\"hidden\" name=\"id\"${add_attribute(\"value\", task.id, 0)}> <button type=\"submit\" formaction=\"?/runTask\" class=\"btn btn-sm variant-filled disabled:!opacity-100\" ${task.stats.running ? \"disabled\" : \"\"}>${task.stats.running ? `${validate_component(ProgressRadial, \"ProgressRadial\").$$render(\n      $$result,\n      {\n        class: \"h-4 w-4\",\n        stroke: 100,\n        meter: \"stroke-surface-50 dark:stroke-surface-900\",\n        value: task.stats.progress === void 0 || task.stats.progress === null ? void 0 : task.stats.progress * 100\n      },\n      {},\n      {}\n    )}` : `${validate_component(Play$1, \"Play\").$$render($$result, { class: \"h-4 w-4\" }, {}, {})}`}</button> </form></td> </tr>`;\n  })}</tbody></table></div>`;\n});\nexport {\n  Page as default\n};\n"],"names":["Icon"],"mappings":"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"}