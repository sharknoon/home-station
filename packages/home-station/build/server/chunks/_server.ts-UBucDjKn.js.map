{"version":3,"file":"_server.ts-UBucDjKn.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/events/_server.ts.js"],"sourcesContent":["import { b as building } from \"../../../chunks/environment.js\";\nimport { t as tasks } from \"../../../chunks/tasks.js\";\nconst controllers = /* @__PURE__ */ new Set();\nif (!building) {\n  for (const task of tasks) {\n    task.stats.subscribe((stats) => {\n      const result = `event: updateStats\ndata: ${JSON.stringify({ id: task.id, stats })}\n\n`;\n      controllers.forEach((controller) => controller.enqueue(result));\n    });\n  }\n}\nconst GET = async () => {\n  let controller;\n  return new Response(\n    new ReadableStream({\n      start: (c) => {\n        controller = c;\n        controllers.add(controller);\n      },\n      cancel: () => {\n        controllers.delete(controller);\n      }\n    }),\n    {\n      headers: {\n        \"Content-Type\": \"text/event-stream\",\n        \"Cache-Control\": \"no-cache\",\n        Connection: \"keep-alive\"\n      }\n    }\n  );\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAM,WAAW,mBAAmB,IAAI,GAAG,EAAE,CAAC;AAC/B;AACf,EAAE,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,KAAK,KAAK;AACpC,MAAM,MAAM,MAAM,GAAG,CAAC;AACtB,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;AAC/C;AACA,CAAC,CAAC;AACF,MAAM,WAAW,CAAC,OAAO,CAAC,CAAC,UAAU,KAAK,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACtE,KAAK,CAAC,CAAC;AACP,GAAG;AACH,CAAC;AACI,MAAC,GAAG,GAAG,YAAY;AACxB,EAAE,IAAI,UAAU,CAAC;AACjB,EAAE,OAAO,IAAI,QAAQ;AACrB,IAAI,IAAI,cAAc,CAAC;AACvB,MAAM,KAAK,EAAE,CAAC,CAAC,KAAK;AACpB,QAAQ,UAAU,GAAG,CAAC,CAAC;AACvB,QAAQ,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AACpC,OAAO;AACP,MAAM,MAAM,EAAE,MAAM;AACpB,QAAQ,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;AACvC,OAAO;AACP,KAAK,CAAC;AACN,IAAI;AACJ,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,mBAAmB;AAC3C,QAAQ,eAAe,EAAE,UAAU;AACnC,QAAQ,UAAU,EAAE,YAAY;AAChC,OAAO;AACP,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}