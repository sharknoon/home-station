{"version":3,"file":"4-wm3Nw8I7.js","sources":["../../../.svelte-kit/adapter-node/chunks/theme.js","../../../.svelte-kit/adapter-node/entries/pages/(sidebar)/account/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/4.js"],"sourcesContent":["const themes = [\n  { name: \"skeleton\", icon: \"ðŸ’€\" },\n  { name: \"wintry\", icon: \"ðŸŒ¨ï¸\" },\n  { name: \"modern\", icon: \"ðŸ¤–\" },\n  { name: \"rocket\", icon: \"ðŸš€\" },\n  { name: \"seafoam\", icon: \"ðŸ§œâ€â™€ï¸\" },\n  { name: \"vintage\", icon: \"ðŸ“º\" },\n  { name: \"sahara\", icon: \"ðŸœï¸\" },\n  { name: \"hamlindigo\", icon: \"ðŸ‘”\" },\n  { name: \"gold-nouveau\", icon: \"ðŸ’«\" },\n  { name: \"crimson\", icon: \"â­•\" }\n];\nexport {\n  themes as t\n};\n","import { d as db, u as users } from \"../../../../chunks/db.js\";\nimport { eq } from \"drizzle-orm\";\nimport { f as fail } from \"../../../../chunks/index.js\";\nimport { g as get_store_value } from \"../../../../chunks/utils2.js\";\nimport { a as i18n } from \"../../../../chunks/i18n.js\";\nimport bcrypt from \"bcrypt\";\nimport { t as themes } from \"../../../../chunks/theme.js\";\nconst actions = {\n  updateAccount: async ({ request, locals }) => {\n    if (!locals.user)\n      return fail(401, { success: false, error: \"Unauthorized\" });\n    const data = await request.formData();\n    const language = data.get(\"language\")?.toString();\n    if (!language)\n      return fail(400, { success: false, language, error: \"Language is required\" });\n    const supportedLanguages = get_store_value(i18n).options.supportedLngs || [];\n    if (!supportedLanguages.includes(language)) {\n      return fail(400, {\n        error: `Unsupported language '${language}', supported languages: ${supportedLanguages}`\n      });\n    }\n    await db.update(users).set({ language }).where(eq(users.id, locals.user.id));\n    locals.user.language = language;\n    return { success: true, language };\n  },\n  updatePassword: async ({ request, locals }) => {\n    if (!locals.user)\n      return fail(401, { success: false, error: \"Unauthorized\" });\n    const data = await request.formData();\n    const password = data.get(\"password\")?.toString();\n    if (!password || password.length < 8 || password.length > 255) {\n      return fail(400, {\n        success: false,\n        password: \"password\",\n        error: \"Password is invalid\"\n      });\n    }\n    const hashedPassword = await bcrypt.hash(password, 10);\n    await db.update(users).set({ hashedPassword }).where(eq(users.id, locals.user.id));\n    return { success: true, password: \"password\" };\n  },\n  updateTheme: async ({ request, locals }) => {\n    if (!locals.user)\n      return fail(401, { success: false, error: \"Unauthorized\" });\n    const data = await request.formData();\n    const theme = data.get(\"theme\")?.toString();\n    if (!theme)\n      return fail(400, { success: false, theme, error: \"Theme is required\" });\n    if (!themes.map((t) => t.name).includes(theme)) {\n      return fail(400, {\n        error: `Unsupported theme '${theme}', supported themes: ${themes}`\n      });\n    }\n    await db.update(users).set({ theme }).where(eq(users.id, locals.user.id));\n    locals.user.theme = theme;\n    return { success: true, theme };\n  }\n};\nexport {\n  actions\n};\n","import * as server from '../entries/pages/(sidebar)/account/_page.server.ts.js';\n\nexport const index = 4;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(sidebar)/account/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(sidebar)/account/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/4.P1iGPAr_.js\",\"_app/immutable/chunks/scheduler.bQlOXBkt.js\",\"_app/immutable/chunks/index.dknh01mB.js\",\"_app/immutable/chunks/each.anRlpCm9.js\",\"_app/immutable/chunks/ProgressBar.svelte_svelte_type_style_lang.JlGIzIKZ.js\",\"_app/immutable/chunks/index.5bRYXlS8.js\",\"_app/immutable/chunks/spread.rEx3vLA9.js\",\"_app/immutable/chunks/i18n.Mah0M8rZ.js\",\"_app/immutable/chunks/Icon.9NkTZT6r.js\",\"_app/immutable/chunks/forms.uhvzcuB7.js\",\"_app/immutable/chunks/entry.qbHVI6p7.js\"];\nexport const stylesheets = [\"_app/immutable/assets/ProgressBar.oq5aOWfL.css\"];\nexport const fonts = [];\n"],"names":["db"],"mappings":"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"}