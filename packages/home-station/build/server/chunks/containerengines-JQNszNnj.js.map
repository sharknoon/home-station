{"version":3,"file":"containerengines-JQNszNnj.js","sources":["../../../.svelte-kit/adapter-node/chunks/containerengines.js"],"sourcesContent":["import Docker from \"dockerode\";\nasync function getEngine(engine) {\n  switch (engine?.type ?? \"local\") {\n    case \"local\":\n      if (!engine.socketPath)\n        return new Docker();\n      return new Docker({ socketPath: engine.socketPath });\n    case \"remote\":\n      return new Docker({\n        host: engine.host ?? \"\",\n        // Is required for type remote\n        ca: engine.ca ?? void 0,\n        cert: engine.cert ?? void 0,\n        key: engine.key ?? void 0\n      });\n  }\n}\nasync function testLocalConnection(socketPath) {\n  try {\n    const docker = socketPath ? new Docker({ socketPath }) : new Docker();\n    const result = await docker.ping();\n    const ping = result.toString(\"utf-8\");\n    if (ping !== \"OK\") {\n      return Promise.reject(\"Docker ping did not return OK: \" + ping);\n    }\n    return docker;\n  } catch (err) {\n    if (err instanceof AggregateError) {\n      const errors = err.errors.map((e) => String(e)).join(\", \");\n      return Promise.reject(\"Couldn't connect to Docker: \" + errors);\n    }\n    if (err instanceof Error) {\n      return Promise.reject(\"Couldn't connect to Docker: \" + err.message);\n    }\n    return Promise.reject(\"Couldn't connect to Docker: \" + err);\n  }\n}\nasync function testRemoteConnection(url, ca, cert, key) {\n  try {\n    const docker = new Docker({ host: url, ca, cert, key });\n    const result = await docker.ping();\n    const ping = result.toString(\"utf-8\");\n    if (ping !== \"OK\") {\n      return Promise.reject(\"Docker ping did not return OK: \" + ping);\n    }\n    return docker;\n  } catch (err) {\n    if (err instanceof AggregateError) {\n      const errors = err.errors.map((e) => String(e)).join(\", \");\n      return Promise.reject(\"Couldn't connect to Docker: \" + errors);\n    }\n    if (err instanceof Error) {\n      return Promise.reject(\"Couldn't connect to Docker: \" + err.message);\n    }\n    return Promise.reject(\"Couldn't connect to Docker: \" + err);\n  }\n}\nexport {\n  testLocalConnection as a,\n  getEngine as g,\n  testRemoteConnection as t\n};\n"],"names":[],"mappings":"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"}